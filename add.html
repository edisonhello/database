<!DOCTYPE html>
<html>
<head>
	<title>addNew</title>
</head>
<body>

	<div id="wrn"></div>
	<div id="login">
		username : <input type="text" id="username"><br>
		password : <input type="password" id="pass"><br>
		<input type="button" id="login!" value="login">
	</div>

	<br><br><br>

	title: <input type="text" id="title"><br>
	description: <input type="text" id="description" style="height:100px"><br>
	tags: <input type="tags"id="tag"><br><br>
	<input type="button" value="add" id="add">
	<input type="button" value="back to home" id="back">
</body>
</html>

<script src="/static/jQuery/jquery-2.1.4.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/static/jQuery/url.min.js"></script>
<script type="text/javascript">
	var socket = io('http://localhost:7122')

	var logined = false

	window.addEventListener('load',function(){
		document.getElementById('add').addEventListener('click', function(){
			var title = document.getElementById('title').value
			var descr = document.getElementById('description').value
			var tags = document.getElementById('tag').value
			var tag = tags.split(" ")
			socket.emit('additem', title, descr, tag)
			document.getElementById('title').value = ''
			document.getElementById('description').value = ''
			document.getElementById('tag').value = ''
		})
		document.getElementById('back').addEventListener('click', function(){
			window.location='http://localhost:7122'
		})
		document.getElementById('login!').addEventListener('click', function(){
			var usernam = document.getElementById('username').value
			var passw = document.getElementById('pass').value
			if(usernam == "" || passw == ""){
				$('#wrn').text("invalid login")
			}
			else{
				socket.emit('loginreq', usernam, passw)
			}
		})
	})
////////////////no test
	socket.on('logindone', function(){
		$('#wrn').text("successful login!")
		$('#login').remove()
		logined = true
	})
	socket.on('loginfail', function(){
		$('#wrn').text("username or password wrong!")
	})
////////////////////////
</script>