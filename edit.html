<!DOCTYPE html>
<html>
<head>
	<title>View</title>
</head>
<body>
	insert id to find data: <input type="text" id="getid"><br>

	title: <input type="text" id="title"><br>
	description: <input type="text" id="description" style="height:100px"><br>
	tags: <input type="tags"id="tag"><br>
	<input type="button" value="update" id="update">
	<input type="button" value="back to home" id="back">
</body>
</html>

<script src="/static/jQuery/jquery-2.1.4.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/static/jQuery/url.min.js"></script>
<script type="text/javascript">
	var socket = io('http://localhost:7122')

	var nowId

	setInterval(function(){
		if(nowId != document.getElementById('getid').value){
			nowId = document.getElementById('getid').value
			if(nowId == 0){
				document.getElementById('title').value = ""
				document.getElementById('description').value = ""
				document.getElementById('tag').value = ""
			}
			socket.emit('thisiddetail?', nowId)
		}
	},100)

	window.addEventListener('load',function(){
		document.getElementById('update').addEventListener('click', function(){
			/**//**//**//**//**/
			var title = document.getElementById('title').value
			var descr = document.getElementById('description').value
			var tags = document.getElementById('tag').value
			var tag = tags.split(" ")
			socket.emit('additem', title, descr, tag)
		})
		document.getElementById('back').addEventListener('click', function(){
			window.location='http://localhost:7122'
		})
		document.getElementById('update').addEventListener('click', function(){
			var title = document.getElementById('title').value
			var descr = document.getElementById('description').value
			var tags = document.getElementById('tag').value
			var tag = tags.split(" ")
			var updatethisid = document.getElementById('getid').value
			socket.emit('updateitem', title, descr, tag, updatethisid)
		})
	})

	socket.on('thisisdetail', function(title, descr, tagArray){
		console.log()

		var tagString = tagArray.toString()
		tagString = tagString.replace(/,/g,' ')
		document.getElementById('title').value = title
		document.getElementById('description').value = descr
		document.getElementById('tag').value = tagString
	})

	socket.on('thisidnull', function(){
		document.getElementById('title').value = "nothing here!"
		document.getElementById('description').value = ""
		document.getElementById('tag').value = "		"
	})
</script>